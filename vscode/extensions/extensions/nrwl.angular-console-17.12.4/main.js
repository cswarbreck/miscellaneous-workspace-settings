(()=>{var e,t,n,r={16323:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=16323,e.exports=t},83988:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=83988,e.exports=t},13885:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=13885,e.exports=t},87231:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=87231,e.exports=t},31742:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=31742,e.exports=t},92792:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=92792,e.exports=t},35841:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=35841,e.exports=t},26291:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=26291,e.exports=t},73935:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>pe,deactivate:()=>ue});var r=n(57147),o=n(71017),s=n(89496),a=n(14255),i=n(64903),c=n(28624),p=n(69381);const u=[{name:"with-deps",type:c.OptionType.Boolean,description:"Include dependencies of specified projects when computing what to run",default:!1},{name:"parallel",type:c.OptionType.Boolean,description:"Parallelize the command",default:"false"},{name:"maxParallel",type:c.OptionType.Number,description:"Max number of parallel processes",default:3},{name:"only-failed",type:c.OptionType.Boolean,description:"Isolate projects which previously failed",default:"false"},{name:"skip-nx-cache",type:c.OptionType.Boolean,description:"Rerun the tasks even when the results are available in the cache",default:!1},{name:"exclude",type:c.OptionType.String,description:"Exclude certain projects from being processed"}].map((e=>({...e,aliases:[]})));async function d(e,t,n){const c=(((n.projects||{})[e]||{}).targets||{})[t]||{},p=Object.keys(c.configurations||{}),d=c.executor;if(!d)return s.window.showErrorMessage(`Please update ${e}'s ${t} definition to specify a builder.`,"See definition").then((n=>{n&&(0,i.revealNxProject)(e,{name:t})})),(0,a.c2)().exception("Builder part of architect definition not found"),{validBuilder:!1,configurations:p,builderName:d,options:[]};const h=await(0,a.Y2)(l(),d,c.options);return h?{validBuilder:!0,builderName:d,configurations:p,options:(0,r.existsSync)((0,o.join)(l(),"nx.json"))?[...u,...h]:h}:(s.window.showErrorMessage(`Builder specified for ${e} ${t} was not found in your node_modules. Check that specified builder is correct and has a corresponding entry in package.json`,"Show definition").then((n=>{n&&(0,i.revealNxProject)(e,{name:t})})),(0,a.c2)().exception("Specified builder not found in node_modules"),{validBuilder:!1,builderName:d,configurations:p,options:[]})}function l(){return(0,o.dirname)(p.Tl.instance.get("nxWorkspaceJsonPath",""))}function h(e){return(0,r.existsSync)((0,o.join)(e,"node_modules"))?{validNodeModules:!0}:(s.window.showErrorMessage("Could not execute task since node_modules directory is missing. Run npm install at: "+e),{validNodeModules:!1})}var m=n(14560);function f(e){const t=(0,m.detectPackageManager)(e.cwd),n=(0,m.getPackageManagerCommand)(t);return new s.ShellExecution(`${n.exec} ${e.displayCommand}`,{cwd:e.cwd})}class g extends s.Task{static create(e,t){const n=(0,o.join)(t,".."),{command:r}=e,a=function(e){const{positional:t,command:n,flags:r}=e;switch(n){case"add":case"build":case"lint":case"generate":case"run":case"serve":case"test":return[n,t,...r];default:return["run",`${t}:${n}`,...r]}}(e),i=t.endsWith("workspace.json"),c=i?`nx ${a.join(" ")}`:`ng ${a.join(" ")}`,p=new g({...e,type:i?"nx":"ng"},s.TaskScope.Workspace,c,i?"nx":"ng",f({displayCommand:c,cwd:n}));switch(r){case"build":p.group=s.TaskGroup.Build,p.problemMatchers.push("$webpack-builder");break;default:p.group=s.TaskGroup.Test}return p}}class w extends s.Task{static create(e,t){const{command:n,flags:r,positional:o}=e,a=`nx ${[n,...o?[o]:[],...r].join(" ")}`;return new w({...e,type:"nx"},s.TaskScope.Workspace,a,"nx",f({displayCommand:a,cwd:t}))}}var y=n(47812);let x,k;class j{constructor(){x=this,s.tasks.onDidEndTaskProcess((()=>{this.currentDryRun=void 0,this.deferredDryRun&&(this.executeTask(this.deferredDryRun),this.deferredDryRun=void 0)}))}getWorkspacePath(){return(0,o.join)(this.getWorkspaceJsonPath(),"..")}getWorkspaceJsonPath(){return p.Tl.instance.get("nxWorkspaceJsonPath","")}provideTasks(){return null}resolveTask(e){if(this.getWorkspaceJsonPath()&&e.definition.command&&e.definition.project){const t=this.createTask({command:e.definition.command,positional:e.definition.project,flags:Array.isArray(e.definition.flags)?e.definition.flags:[]});return t.definition=e.definition,t}}createTask(e){return g.create(e,this.getWorkspaceJsonPath())}executeTask(e){const{validNodeModules:t}=h(this.getWorkspacePath());if(!t)return;const n=e.flags.includes("--dry-run");if(n&&this.currentDryRun)return void(this.deferredDryRun=e);let r;const o=e.positional.match(y.Y);return r="generate"===e.command&&o&&o.length>2?w.create({command:`workspace-${o[1]}`,positional:o[2],flags:e.flags},x.getWorkspacePath()):this.createTask(e),(0,a.c2)().featureUsed(e.command),s.tasks.executeTask(r).then((e=>{n&&(this.currentDryRun=e)}))}async getProjects(e){if(e)return e.projects;{const e=await(0,i.verifyWorkspace)();return e.validWorkspaceJson&&e.json?e.json.projects:{}}}async getProjectNames(){return Object.keys(await this.getProjects()||{})}async getProjectEntries(e){return Object.entries(await this.getProjects(e)||{})}async projectForPath(e){if(!this.getWorkspaceJsonPath())return null;const t=(await this.getProjectEntries()).find((([,t])=>{const n=(0,o.join)(this.getWorkspacePath(),t.root);if(n===e)return!0;const r=(0,o.relative)(n,e);return r&&!r.startsWith("..")&&!(0,o.isAbsolute)(r)}));return t?{name:t[0],...t[1]}:null}}class v{constructor(e,t,n,r){this.flagName=e,this.detail=t,this.option=n,this.label=r}}async function P(e,t,n,r={}){const o=Object.entries(r).map((([e,t])=>`--${e}=${t}`)),a=await async function(e,t){const n=[{picked:!0,alwaysShow:!0,label:`Execute: ${e}`},...t.map((e=>new v(e.name,e.description||e.type,e,`${e.name}`)))],r=await s.window.showQuickPick(n,{placeHolder:"Execute command or set flags"});return r?Boolean(r.option)?{flag:r}:{execute:!0}:{execute:!1}}(`${n} ${e} ${o.join(" ")}`,t);if(!a.flag)return a.execute?o:void 0;const i=await function(e){const t=`--${e.flagName}=...`;return"boolean"===e.option.type?s.window.showQuickPick(["true","false"],{placeHolder:t}):e.option.enum&&e.option.enum.length?s.window.showQuickPick([...e.option.enum.map(String)],{placeHolder:t,canPickMany:"array"===e.option.type}):s.window.showInputBox({placeHolder:t})}(a.flag);return i&&i.length>0?r[a.flag.flagName]=i:delete r[a.flag.flagName],P(e,t,n,r)}async function b(){const{validWorkspaceJson:e,json:t}=await(0,i.verifyWorkspace)();if(!e||!t)return;const n=Array.from(new Set(Object.entries(t.projects).map((([,e])=>Object.keys(e.targets||{}))).flat())).sort();if(n.length)return s.window.showQuickPick(n);s.window.showErrorMessage("None of your workspace projects have an architect or targets command")}const T=[{name:"base",type:c.OptionType.String,description:"Base of the current branch (usually master)"},{name:"head",type:c.OptionType.String,description:"Latest commit of the current branch (usually HEAD)"},{name:"parallel",type:c.OptionType.Boolean,description:"Parallelize the command",default:"false"},{name:"maxParallel",type:c.OptionType.Number,description:"Max number of parallel processes",default:3},{name:"only-failed",type:c.OptionType.Boolean,description:"Isolate projects which previously failed",default:"false"},{name:"all",type:c.OptionType.Boolean,description:"All projects"},{name:"configuration",type:c.OptionType.String,description:"This is the configuration to use when performing tasks on projects"},{name:"exclude",type:c.OptionType.String,description:"Exclude certain projects from being processed"},{name:"files",type:c.OptionType.Array,description:"Manually specify changed files, delimited by commas"},{name:"skip-nx-cache",type:c.OptionType.Boolean,description:"Rerun the tasks even when the results are available in the cache",default:!1},{name:"verbose",type:c.OptionType.Boolean,description:"Print additional error stack trace on failure",default:!1}].map((e=>({...e,aliases:[]}))),C=[{name:"all",type:c.OptionType.Boolean,description:"All projects"},{name:"parallel",type:c.OptionType.Boolean,description:"Parallelize the command",default:"false"},{name:"maxParallel",type:c.OptionType.Number,description:"Max number of parallel processes",default:3},{name:"only-failed",type:c.OptionType.Boolean,description:"Isolate projects which previously failed",default:"false"},{name:"configuration",type:c.OptionType.String,description:"This is the configuration to use when performing tasks on projects"},{name:"skip-nx-cache",type:c.OptionType.Boolean,description:"Rerun the tasks even when the results are available in the cache",default:!1},{name:"with-deps",type:c.OptionType.Boolean,description:"Include dependencies of specified projects when computing what to run",default:!1},{name:"exclude",type:c.OptionType.String,description:"Exclude certain projects from being processed"},{name:"verbose",type:c.OptionType.Boolean,description:"Print additional error stack trace on failure",default:!1}].map((e=>({...e,aliases:[]}))),O=[{name:"watch",type:c.OptionType.Boolean,description:"Watch for changes to dep graph and update in-browser"},{name:"file",type:c.OptionType.String,description:"output file (e.g. --file=output.json)"},{name:"filter",type:c.OptionType.Array,description:"Use to limit the dependency graph to only show specific projects, list of projects delimited by commas."},{name:"exclude",type:c.OptionType.Array,description:"List of projects delimited by commas to exclude from the dependency graph."},{name:"host",type:c.OptionType.String,description:"Bind the dep graph server to a specific ip address."}].map((e=>({...e,aliases:[]})));async function S(e){let t,n;switch((0,a.c2)().featureUsed("affected-cli"),e){case"apps":case"libs":case"dep-graph":n=`affected:${e}`;break;default:n="affected",t=`--target=${e}`,await P(`affected ${t}`,T,"nx")}const r=await P(n,T,"nx");if(void 0!==r){const e=w.create({command:n,flags:r,positional:t},k.getWorkspacePath());s.tasks.executeTask(e)}}const $=new Map([["Generate",{light:"nx-cli-light.svg",dark:"nx-cli-dark.svg"}],["Run",{light:"nx-cli-light.svg",dark:"nx-cli-dark.svg"}],["Build",{light:"nx-cli-light.svg",dark:"nx-cli-dark.svg"}],["Serve",{light:"nx-cli-light.svg",dark:"nx-cli-dark.svg"}],["Test",{light:"nx-cli-light.svg",dark:"nx-cli-dark.svg"}],["E2E",{light:"nx-cli-light.svg",dark:"nx-cli-dark.svg"}],["Lint",{light:"nx-cli-light.svg",dark:"nx-cli-dark.svg"}]]),N=["Generate","Run","Build","Serve","Test","E2E","Lint"];class E extends s.TreeItem{constructor(e,t,n,r){super(t,s.TreeItemCollapsibleState.None),this.workspaceJsonPath=e,this.route=t,this.extensionPath=n,this.generatorType=r,this.command={title:this.route,command:"nxConsole.revealWebViewPanel",tooltip:"",arguments:[this]},this.iconPath=E.getIconUriForRoute(this.extensionPath,this.route)}revealWorkspaceRoute(e){(e.visible?e.reveal(this,{select:!0,focus:!0}):Promise.reject()).then((()=>{}),(()=>{}))}static getIconUriForRoute(e,t){const n=$.get(t);return n?{light:s.Uri.file((0,o.join)(e,"assets",n.light)),dark:s.Uri.file((0,o.join)(e,"assets",n.dark))}:void 0}}const W=new s.TreeItem("Scanning for your Nx Workspace..."),D=new s.TreeItem("Select workspace");D.command={tooltip:"Select an workspace directory to open",title:"Select workspace",command:"nxConsole.selectWorkspaceManually"};const U=new s.TreeItem("Change workspace");U.command={tooltip:"Select an workspace json file to open",title:"Change workspace",command:"nxConsole.selectWorkspaceManually"};class L extends a.Th{constructor(e){super(),this.extensionPath=e,this.scanning=Boolean(p.Tl.instance.get("nxWorkspaceJsonPath","")),D.iconPath={light:(0,o.join)(e,"assets","nx-console-light.svg"),dark:(0,o.join)(e,"assets","nx-console-dark.svg")},U.iconPath={light:(0,o.join)(e,"assets","nx-console-light.svg"),dark:(0,o.join)(e,"assets","nx-console-dark.svg")}}getParent(){return null}endScan(){this.scanning=!1,this.refresh()}getChildren(){const e=p.Tl.instance.get("nxWorkspaceJsonPath","");return e?(U.description="Current: "+(0,o.dirname)(e),[...N.map((t=>new E(e,t,this.extensionPath))),U]):this.scanning?[W]:[D]}}class M{constructor(e,t,n,r){this.projectName=e,this.targetDef=t,this.command=n,this.label=r}}async function A(e,t,n){const r=await(0,a.PA)(e);let c=r.map((e=>e.data)).filter((e=>!!e)).map((e=>({description:e.description,label:`${e.collection} - ${e.name}`,collectionName:e.collection,generator:e})));if(n&&(c=c.filter((e=>e.generator.type===n))),r){const t=await s.window.showQuickPick(c);if(t){const n=t.generator.options||await async function(e,t,n){const r=(0,o.join)(e,".."),s=(0,o.join)(r,"node_modules"),c=await(0,a.eP)((0,o.join)(t,"package.json"),s),p=await(0,a.eP)(c.json.schematics||c.json.generators,(0,o.dirname)(c.path)),u=Object.assign({},p.json.schematics,p.json.generators),d=await(0,a.eP)(u[n].schema,(0,o.dirname)(p.path)),l=await async function(e){const t=await(0,a.eP)(e);let n=t.json.schematics||t.json.generators;if(!n)try{n=(await(0,i.getNxConfig)((0,o.dirname)(e))).generators||{}}catch(e){n={}}return Object.keys(n).reduce(((e,t)=>{if(t.includes(":")){const[r,o]=t.split(":");e[r]||(e[r]={}),e[r][o]=n[t]}else{const r=t;e[r]||(e[r]={}),Object.keys(n[r]).forEach((t=>{e[r][t]=n[r][t]}))}return e}),{})}(e),h=l&&l[t]&&l[t][n];return await(0,a.Q9)(d.json,h)}(e,t.collectionName,t.generator.name),r=`${t.collectionName}:${t.generator.name}`;return{...t.generator,options:n,command:"generate",positional:r,cliName:"nx"}}}}const _=["build","deploy","e2e","lint","serve","test","xi18n"];let q,J;async function B(e,t,n,r){if(!q.getWorkspacePath())return void s.window.showErrorMessage("Nx Console requires a workspace be set to perform this action");const{validWorkspaceJson:o,configurationFilePath:a}=await(0,i.verifyWorkspace)();if(!o)return void s.window.showErrorMessage("Invalid configuration file");const c=new E(a,`${e[0].toUpperCase()}${e.slice(1)}`,t,r);s.commands.executeCommand("nxConsole.revealWebViewPanel",c,n)}async function I(e,t,n,r){let o;r?o=[`--configuration=${r}`]:t&&n&&(o=[]);const{validWorkspaceJson:a,json:p,workspaceType:u}=await(0,i.verifyWorkspace)();if(!t){const n=a?await F(e,p):void 0;if(!n)return;t=n.projectName}const l="run"===e;if(!n)if(l){if(!(n=await async function(e){return s.window.showQuickPick(e,{placeHolder:"Target to run"})}(Object.keys(p.projects[t].targets||{}))))return}else n=e;const h=await d(t,n,p),{validBuilder:m,options:f,configurations:g}=h;let w=[...f];m&&(o||(g.length&&(w=[{name:"configuration",description:'A named build target, as specified in the "configurations" section of angular.json.',type:c.OptionType.String,enum:g,aliases:[]},...w]),o=await P(l?`${e} ${t}:${n}`:`${e} ${t}`,w,u)),void 0!==o&&q.executeTask({positional:l?`${t}:${n}`:t,command:e,flags:o}))}async function F(e,t){const n=(await q.getProjectEntries(t)).filter((([,{targets:e}])=>Boolean(e))).flatMap((([e,{targets:t}])=>({project:e,targets:t}))).filter((({targets:t})=>Boolean(t&&t[e])||"run"===e)).map((({project:t,targets:n})=>new M(t,n[e],e,t)));if(n.length)return s.window.showQuickPick(n,{placeHolder:`Project to ${e}`});s.window.showInformationMessage(`No projects have an target command for ${e}`)}function R(e){return"project"===e.name||"projectName"===e.name||e.$default&&"projectName"===e.$default.$source}async function V({context:e,cliTaskProvider:t,runTargetTreeItem:n,runTargetTreeView:c,contextMenuUri:p}){const{label:u,generatorType:l}=n,h=await async function(e,t="Run",n,r){try{if(!e.getWorkspacePath())return;const{validWorkspaceJson:o,json:c,workspaceType:p}=await(0,i.verifyWorkspace)();if(!o)return;const u=t.toLowerCase();switch(t){case"Build":case"E2E":case"Lint":case"Serve":case"Test":{const e=await F(u,c);if(!e)return;const{validBuilder:t,options:n}=await d(e.projectName,u,c);if(!t)return;return{...(0,a.kK)(u,e.targetDef,e.projectName),options:n,positional:e.projectName,command:u,cliName:p}}case"Run":{const t=(await e.getProjectEntries()).filter((([,{targets:e}])=>Boolean(e))).flatMap((([e,{targets:t}])=>({project:e,targets:t}))).flatMap((({project:e,targets:t})=>[...Object.entries(t||{}).map((([t,n])=>({project:e,targetName:t,targetDef:n})))])).map((({project:e,targetName:t,targetDef:n})=>new M(e,n,t,`${e}:${t}`)));return s.window.showQuickPick(t).then((async e=>{if(!e)return;const{validBuilder:t,options:n}=await d(e.projectName,e.command,c);return t?{...(0,a.kK)(e.command,e.targetDef,e.projectName),command:"run",positional:`${e.projectName}:${e.command}`,options:n,cliName:p}:void 0}))}case"Generate":{const t=await A(e.getWorkspaceJsonPath(),0,r);if(!t)return;for(const n of t.options)if(!n.enum&&R(n)){const t=await e.getProjectEntries();n.enum=n.items=t.map((e=>e[0])).sort()}const o=n?await async function(e,t,n){if(t){const r=await n.projectForPath(t.fsPath),o=r&&r.name||void 0,s=n.getWorkspacePath();let a=t.fsPath.replace(s,"").replace(/\\/g,"/").replace(/^\//,"");const c=await(0,i.getNxConfig)(s),p=c.workspaceLayout?.appsDir??"apps",u=c.workspaceLayout?.libsDir??"libs";return(p&&"application"===e.name||"app"===e.name)&&(a=a.replace(p,"").replace(/^\//,"")),(u&&"library"===e.name||"lib"===e.name)&&(a=a.replace(u,"").replace(/^\//,"")),{project:o,projectName:o,path:a,...!(o&&e.options.some(R))&&{directory:a}}}}(t,n,e):void 0;return{...t,cliName:p,contextValues:o}}}}catch(e){const t=e.toString?e.toString():JSON.stringify(e);(0,a.g)().appendLine(t),(0,a.c2)().exception(t),s.window.showErrorMessage("Nx Console encountered an error parsing your node modules","See details").then((e=>{e&&(0,a.g)().show()}))}}(t,u,p,l);if(!h)return;const m=function(e,t,n,i){return J?(J.title=n,J.webview.postMessage({taskExecutionSchema:t}),J.reveal()):(J=s.window.createWebviewPanel("nx-console",n,s.ViewColumn.Active,{retainContextWhenHidden:!0,enableScripts:!0}),J.onDidDispose((()=>{J=void 0})),J.iconPath={light:s.Uri.file((0,o.join)(e.extensionPath,"assets","nx-console-light.svg")),dark:s.Uri.file((0,o.join)(e.extensionPath,"assets","nx-console-dark.svg"))},G(J,e,t),e.extensionMode===s.ExtensionMode.Development&&(0,r.watch)((0,o.join)(e.extensionPath,"assets","public","main.js"),(()=>{J&&(G(J,e,t),s.commands.executeCommand("workbench.action.webview.reloadWebviewAction"))})),J.webview.onDidReceiveMessage((e=>i.executeTask(e)))),(0,a.c2)().screenViewed(n),J}(e,h,u,t);return e.subscriptions.push(m),m.onDidChangeViewState((e=>{e.webviewPanel.visible&&n.revealWorkspaceRoute(c)})),m}function G(e,t,n){e.webview.html=function(e,t,n){const r=s.Uri.joinPath(t.extensionUri,"assets","public","styles.css"),o=s.Uri.joinPath(t.extensionUri,"assets","public","runtime.js"),a=s.Uri.joinPath(t.extensionUri,"assets","public","main.js");return`<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <title>VscodeUi</title>\n    <base href="/" />\n\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    <link rel="icon" type="image/x-icon" href="favicon.ico" />\n\n    <script>\n      // At runtime, VSCode server will replace this empty schema with the one to render.\n      window.VSCODE_UI_SCHEMA = {};\n\n      window.addEventListener('message', event => {\n        const taskExecutionSchema = event.data.taskExecutionSchema;\n        if (taskExecutionSchema && window.SET_TASK_EXECUTION_SCHEMA) {\n          window.SET_TASK_EXECUTION_SCHEMA(taskExecutionSchema);\n        }\n      });\n\n      window.vscode = acquireVsCodeApi();\n    <\/script>\n    <link href="${e.asWebviewUri(r)}" rel="stylesheet"/>\n  </head>\n  <body>\n    <vscode-ui-task-execution-form></vscode-ui-task-execution-form>\n    <script src="${e.asWebviewUri(o)}"><\/script>\n    <script src="${e.asWebviewUri(a)}"><\/script>\n  </body>\n</html>`.replace("window.VSCODE_UI_SCHEMA = {};",`window.VSCODE_UI_SCHEMA = ${JSON.stringify(n)};`)}(e.webview,t,n)}class H extends s.TreeItem{constructor(e,t){super(e,s.TreeItemCollapsibleState.None),this.affectedCommand=e,this.extensionPath=t,this.command={title:this.affectedCommand,command:`nx.${this.affectedCommand.replace(":",".")}`,tooltip:`Run nx ${this.affectedCommand}`},this.iconPath={light:s.Uri.file((0,o.join)(this.extensionPath,"assets","nx-cli-light.svg")),dark:s.Uri.file((0,o.join)(this.extensionPath,"assets","nx-cli-dark.svg"))}}}class Q extends a.Th{constructor(e){super(),this.context=e}getParent(e){return null}getChildren(){return["dep-graph","run-many","affected","affected:apps","affected:build","affected:dep-graph","affected:e2e","affected:libs","affected:lint","affected:test","list","migrate"].map((e=>new H(e,this.context.extensionPath)))}}class z extends s.TreeItem{constructor(e,t,n){super(t,n),this.nxProject=e}}class Y extends a.Th{constructor(e,t){super(),this.cliTaskProvider=t,[["editWorkspaceJson",this.editWorkspaceJson],["revealInExplorer",this.revealInExplorer],["runTask",this.runTask],["refreshNxProjectsTree",this.refreshNxProjectsTree]].forEach((([t,n])=>{e.subscriptions.push(s.commands.registerCommand(`nxConsole.${t}`,n,this))}))}async getParent(e){const{project:t,target:n}=e.nxProject;return n?n.configuration?this.createNxProjectTreeItem({project:t,target:{name:n.name}},n.name):this.createNxProjectTreeItem({project:t},t):null}async createNxProjectTreeItem(e,t,n){const r=new z(e,t,n?s.TreeItemCollapsibleState.Collapsed:s.TreeItemCollapsibleState.None);if(e.target)r.contextValue="task";else{const t=(await this.cliTaskProvider.getProjects())[e.project];t&&(r.resourceUri=s.Uri.file((0,o.join)(this.cliTaskProvider.getWorkspacePath(),t.root))),r.contextValue="project"}return r}async getChildren(e){if(!e){const e=await this.cliTaskProvider.getProjectEntries();return Promise.all(e.map((async([e,t])=>this.createNxProjectTreeItem({project:e},e,Boolean(t.targets)))))}const{nxProject:t}=e,{target:n,project:r}=t,o=(await this.cliTaskProvider.getProjects())[r];if(o){if(n){const{configuration:e}=n;if(e||!o.targets)return;const t=o.targets?o.targets[n.name].configurations:void 0;if(!t)return;return Promise.all(Object.keys(t).map((async e=>this.createNxProjectTreeItem({target:{...n,configuration:e},project:r},e))))}return o.targets?Promise.all(Object.keys(o.targets).map((async e=>this.createNxProjectTreeItem({target:{name:e},project:r},e,Boolean(o.targets?.[e].configurations))))):void 0}}async runTask(e){const{target:t,project:n}=e.nxProject;if(!t)return;const r=[];t.configuration&&r.push(`--configuration=${t.configuration}`),this.cliTaskProvider.executeTask({command:t.name,positional:n,flags:r})}async revealInExplorer(e){e.resourceUri&&s.commands.executeCommand("revealInExplorer",e.resourceUri)}async editWorkspaceJson(e){return(0,i.revealNxProject)(e.nxProject.project,e.nxProject.target)}async refreshNxProjectsTree(){const e=p.Tl.instance.get("nxWorkspaceJsonPath","");(0,a.tr)(e),this.refresh()}}let K,X,Z,ee,te,ne,re,oe,se,ae;class ie{constructor(e){const t=p.Tl.instance.get("nxWorkspaceJsonPath","");K&&K.dispose(),K=(0,a._x)((0,o.join)((0,o.dirname)(t),"package.json"),(()=>{this.setupSchema(t,e.extensionUri,!0)})),e.subscriptions.push(K),this.setupSchema(t,e.extensionUri)}async setupSchema(e,t,n=!1){const r=s.Uri.joinPath(t,"workspace-schema.json"),o=await(0,a.Ie)(e,n),i=await function(e){const[t,n]=function(e){return[e.map((e=>`\n{\n  "if": {\n    "properties": { "builder": { "const": "${e.name}" } },\n    "required": ["builder"]\n  },\n  "then": {\n    "properties": {\n      "options": {\n        "$ref": "${e.path}"\n      },\n      "configurations": {\n        "additionalProperties": {\n          "$ref": "${e.path}",\n          "required": []\n        }\n      }\n    }\n  }\n}\n`)).join(","),e.map((e=>`\n{\n  "if": {\n    "properties": { "executor": { "const": "${e.name}" } },\n    "required": ["executor"]\n  },\n  "then": {\n    "properties": {\n      "options": {\n        "$ref": "${e.path}"\n      },\n      "configurations": {\n        "additionalProperties": {\n          "$ref": "${e.path}",\n          "required": []\n        }\n      }\n    }\n  }\n}\n`)).join(",")]}(e);return function(e,t){return`\n  {\n    "title": "JSON schema for Nx workspaces",\n    "id": "https://nx.dev",\n    "type": "object",\n    "properties": {\n      "version": {\n        "type": "number",\n        "enum": [1, 2]\n      }\n    },\n    "allOf": [\n      {\n        "if": {\n          "properties": { "version": { "const": 1 } },\n          "required": ["version"]\n        },\n        "then": {\n          "description": "Read more about this workspace file at https://nx.dev/latest/angular/getting-started/configuration",\n          "properties": {\n            "projects": {\n              "type": "object",\n              "additionalProperties": {\n                "type": "object",\n                "properties": {\n                  "architect": {\n                    "description": "Configures all the targets which define what tasks you can run against the project",\n                    "additionalProperties": {\n                      "type": "object",\n                      "properties": {\n                        "builder": {\n                          "description": "The function that Nx will invoke when you run this architect",\n                          "type": "string"\n                        },\n                        "options": {\n                          "type": "object"\n                        },\n                        "configurations": {\n                          "description": "provides extra sets of values that will be merged into the options map",\n                          "additionalProperties": {\n                            "type": "object"\n                          }\n                        }\n                      },\n                      "allOf": [\n                       ${e}\n                      ]\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      {\n        "if": {\n          "properties": { "version": { "const": 2 } },\n          "required": ["version"]\n        },\n        "then": {\n          "description": "Read more about this workspace file at https://nx.dev/latest/react/getting-started/configuration",\n          "properties": {\n           "projects": {\n              "type": "object",\n              "additionalProperties": {\n                "oneOf": [\n                  {\n                    "type": "string"\n                  },\n                  {\n                   "type": "object",\n                   "properties": {\n                      "targets": {\n                        "description": "Configures all the targets which define what tasks you can run against the project",\n                        "additionalProperties": {\n                          "type": "object",\n                          "properties": {\n                            "executor": {\n                              "description": "The function that Nx will invoke when you run this target",\n                              "type": "string"\n                            },\n                            "options": {\n                              "type": "object"\n                            },\n                            "configurations": {\n                              "description": "provides extra sets of values that will be merged into the options map",\n                              "additionalProperties": {\n                                "type": "object"\n                              }\n                            }\n                          },\n                          "allOf": [\n                           ${t}\n                          ]\n                        }\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          }\n        }\n      }\n    ]\n  }`}(t,n)}(o);s.workspace.fs.writeFile(r,new Uint8Array(Buffer.from(i,"utf8")))}}class ce{constructor(e){const t=p.Tl.instance.get("nxWorkspaceJsonPath","");X&&X.dispose(),X=(0,a._x)((0,o.join)((0,o.dirname)(t),"package.json"),(()=>{this.setupSchema(t,e.extensionUri,!0)})),e.subscriptions.push(X),this.setupSchema(t,e.extensionUri)}async setupSchema(e,t,n=!1){const r=s.Uri.joinPath(t,"project-schema.json"),o=function(e){const[t,n]=function(e){return[e.map((e=>`\n{\n  "if": {\n    "properties": { "builder": { "const": "${e.name}" } },\n    "required": ["builder"]\n  },\n  "then": {\n    "properties": {\n      "options": {\n        "$ref": "${e.path}"\n      },\n      "configurations": {\n        "additionalProperties": {\n          "$ref": "${e.path}",\n          "required": []\n        }\n      }\n    }\n  }\n}\n`)).join(","),e.map((e=>`\n{\n  "if": {\n    "properties": { "executor": { "const": "${e.name}" } },\n    "required": ["executor"]\n  },\n  "then": {\n    "properties": {\n      "options": {\n        "$ref": "${e.path}"\n      },\n      "configurations": {\n        "additionalProperties": {\n          "$ref": "${e.path}",\n          "required": []\n        }\n      }\n    }\n  }\n}\n`)).join(",")]}(e);return function(e,t){return`\n  {\n    "title": "JSON schema for Nx projects",\n    "id": "https://nx.dev/project-schema",\n    "type": "object",\n    "properties": {\n      "targets": {\n        "description": "Configures all the targets which define what tasks you can run against the project",\n        "additionalProperties": {\n          "type": "object",\n          "properties": {\n            "executor": {\n              "description": "The function that Nx will invoke when you run this target",\n              "type": "string"\n            },\n            "options": {\n              "type": "object"\n            },\n            "configurations": {\n              "description": "provides extra sets of values that will be merged into the options map",\n              "additionalProperties": {\n                "type": "object"\n              }\n            }\n          },\n          "allOf": [\n            ${t}\n          ]\n        }\n      }\n    }\n  }`}(0,n)}(await(0,a.Ie)(e,n));s.workspace.fs.writeFile(r,new Uint8Array(Buffer.from(o,"utf8")))}}async function pe(e){try{const t=Date.now();se=e,p.BG.fromContext(se),p.Tl.fromContext(se),ne=new L(se.extensionPath),(0,a.uZ)(p.BG.instance,true),Z=s.window.createTreeView("nxRunTarget",{treeDataProvider:ne});const i=s.commands.registerCommand("nxConsole.revealWebViewPanel",(async(e,t)=>{if(!(0,r.existsSync)((0,o.join)(e.workspaceJsonPath,"..","node_modules"))){const{validNodeModules:t}=h((0,o.join)(e.workspaceJsonPath,".."));if(!t)return}V({runTargetTreeItem:e,context:se,cliTaskProvider:oe,runTargetTreeView:Z,contextMenuUri:t})})),c=s.commands.registerCommand(D.command.command||"",(async()=>function(){if(s.workspace.workspaceFolders&&s.workspace.workspaceFolders.length>0)return s.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,openLabel:"Select workspace directory"}).then((e=>{if(e&&e[0]){const t=e[0].fsPath;return de((0,o.join)(t,(0,r.existsSync)((0,o.join)(t,"angular.json"))?"angular.json":"workspace.json"))}}));s.window.showInformationMessage("Cannot select an Nx workspace when no folders are opened in the explorer")}())),u=s.workspace.workspaceFolders&&s.workspace.workspaceFolders[0].uri.fsPath;u&&function(e){let t=e;const{root:n}=(0,o.parse)(e),s=p.Tl.instance.get("nxWorkspaceJsonPath","");for(s&&(t=(0,o.dirname)(s));t!==n;)(0,r.existsSync)((0,o.join)(t,"angular.json"))&&de((0,o.join)(t,"angular.json")),(0,r.existsSync)((0,o.join)(t,"workspace.json"))&&de((0,o.join)(t,"workspace.json")),t=(0,o.dirname)(t)}(u),se.subscriptions.push(Z,i,c);const{WorkspaceCodeLensProvider:d}=await Promise.resolve().then(n.bind(n,64903));new d(se),new ie(se),new ce(se),(0,a.c2)().extensionActivated((Date.now()-t)/1e3)}catch(e){s.window.showErrorMessage("Nx Console encountered an error when activating (see output panel)"),(0,a.g)().appendLine("Nx Console encountered an error when activating"),(0,a.g)().appendLine(JSON.stringify(e)),(0,a.c2)().exception(e.message)}}async function ue(){(0,a.c2)().extensionDeactivated(),(0,a.g0)()}async function de(e){p.Tl.instance.set("nxWorkspaceJsonPath",e);const{verifyWorkspace:t}=await Promise.resolve().then(n.bind(n,64903)),{validWorkspaceJson:u}=await t();if(!u)return;if(oe)p.Tl.instance.set("nxWorkspaceJsonPath",e);else{oe=new j,function(e,t){k=t,e.subscriptions.push(s.commands.registerCommand("nx.affected",(async()=>{const e=await b();e&&S(e)})),...["apps","build","dep-graph","e2e","libs","lint","test"].map((e=>s.commands.registerCommand(`nx.affected.${e}`,(()=>S(e)))))),e.subscriptions.push(s.commands.registerCommand("nx.run-many",(()=>async function(){(0,a.c2)().featureUsed("affected-cli");const e=await b();if(!e)return;let t=C;const n=await async function(e){const{validWorkspaceJson:t,json:n}=await(0,i.verifyWorkspace)();if(t&&n)return Array.from(new Set(Object.entries(n.projects).filter((([,t])=>t.targets&&t.targets[e])).map((([e])=>e)))).sort()}(e);n&&n.length&&(t=[{name:"projects",type:c.OptionType.Array,description:"Projects to run",aliases:[],enum:n},...C]);const r=await P("run-many",t,"nx",{target:e});if(void 0!==r){const e=w.create({command:"run-many",flags:r},k.getWorkspacePath());s.tasks.executeTask(e)}}()))),e.subscriptions.push(s.commands.registerCommand("nx.dep-graph",(()=>async function(){(0,a.c2)().featureUsed("affected-cli");const e=await P("dep-graph",O,"nx");if(void 0!==e){const t=w.create({command:"dep-graph",flags:e},k.getWorkspacePath());s.tasks.executeTask(t)}}()))),e.subscriptions.push(s.commands.registerCommand("nx.list",(()=>async function(){(0,a.c2)().featureUsed("affected-cli");const e=w.create({command:"list",flags:[]},k.getWorkspacePath());s.tasks.executeTask(e)}()))),e.subscriptions.push(s.commands.registerCommand("nx.migrate",(()=>async function(){(0,a.c2)().featureUsed("affected-cli");const e=w.create({command:"migrate",flags:[]},k.getWorkspacePath());s.tasks.executeTask(e)}())))}(se,oe),s.tasks.registerTaskProvider("ng",oe),s.tasks.registerTaskProvider("nx",oe),function(e,t){q=t,_.forEach((t=>{e.subscriptions.push(s.commands.registerCommand(`ng.${t}`,(()=>I(t))),s.commands.registerCommand(`ng.${t}.ui`,(()=>B(t,e.extensionPath))),s.commands.registerCommand(`nx.${t}`,(()=>I(t))),s.commands.registerCommand(`nx.${t}.ui`,(()=>B(t,e.extensionPath))))})),["ng","nx"].forEach((t=>{s.commands.registerCommand(`${t}.run`,((e,t,n)=>{I("run",e,t,n)})),s.commands.registerCommand(`${t}.run.fileexplorer`,(async e=>I("run",await async function(e){return(await q.projectForPath(e.fsPath))?.name}(e)))),s.commands.registerCommand(`${t}.generate`,(()=>async function(){const{validWorkspaceJson:e,workspaceType:t,configurationFilePath:n}=await(0,i.verifyWorkspace)();if(!e)return;const r=await A(n);if(!r)return;const o=await P(`generate ${r.positional}`,r.options,t);void 0!==o&&q.executeTask({positional:r.positional,command:"generate",flags:o})}())),s.commands.registerCommand(`${t}.generate.ui`,(()=>B("generate",e.extensionPath))),s.commands.registerCommand(`${t}.generate.ui.fileexplorer`,(t=>B("generate",e.extensionPath,t))),s.commands.registerCommand(`${t}.generate.ui.app`,(t=>{B("generate",e.extensionPath,t,y.T.Application)})),s.commands.registerCommand(`${t}.generate.ui.lib`,(t=>{B("generate",e.extensionPath,t,y.T.Library)})),s.commands.registerCommand(`${t}.generate.ui.app.fileexplorer`,(t=>{B("generate",e.extensionPath,t,y.T.Application)})),s.commands.registerCommand(`${t}.generate.ui.lib.fileexplorer`,(t=>{B("generate",e.extensionPath,t,y.T.Library)}))}))}(se,oe),re=new Y(se,oe),ee=s.window.createTreeView("nxProjects",{treeDataProvider:re});const e=new Q(se);te=s.window.createTreeView("nxCommands",{treeDataProvider:e}),se.subscriptions.push(te,ee)}await async function(e){const{getNxConfig:t}=await Promise.resolve().then(n.bind(n,64903));let r;try{r=await t((0,o.dirname)(e))}catch{return}s.commands.executeCommand("setContext","nxAppsDir",[(0,o.join)((0,o.dirname)(e),r.workspaceLayout?.appsDir??"apps")]),s.commands.executeCommand("setContext","nxLibsDir",[(0,o.join)((0,o.dirname)(e),r.workspaceLayout?.libsDir??"libs")]);const i=await(0,a.PA)(e);let c=!1,p=!1;i.forEach((e=>{e.data&&("application"===e.data.type?c=!0:"library"===e.data.type&&(p=!0))})),s.commands.executeCommand("setContext","nx.hasApplicationGenerators",c),s.commands.executeCommand("setContext","nx.hasLibraryGenerators",p)}(e);const d=(0,r.existsSync)((0,o.join)(e,"..","nx.json")),l=e.endsWith("angular.json");s.commands.executeCommand("setContext","isAngularWorkspace",l),s.commands.executeCommand("setContext","isNxWorkspace",d),function(e,t){ae&&ae.dispose();const n=(0,o.dirname)(t);ae=(0,a._x)(new s.RelativePattern(n,"**/{workspace,angular,project}.json"),(()=>{s.commands.executeCommand("nxConsole.refreshNxProjectsTree")})),e.subscriptions.push(ae)}(se,e),ne.refresh(),re.refresh();let h="nx";d&&l?h="angularWithNx":d&&!l?h="nx":!d&&l&&(h="angular"),(0,a.c2)().record("WorkspaceType",{workspaceType:h})}},47812:(e,t,n)=>{"use strict";var r;n.d(t,{T:()=>r,Y:()=>o}),function(e){e.Application="application",e.Library="library",e.Other="other"}(r||(r={}));const o=/^workspace-(schematic|generator):(.+)/},14255:(e,t,n)=>{"use strict";n.d(t,{Th:()=>o,fh:()=>E,tr:()=>N,Ck:()=>S,Ie:()=>Z,PA:()=>K,g:()=>g,c2:()=>l,uZ:()=>h,Q9:()=>U,eP:()=>W,vL:()=>$,Y2:()=>F,kK:()=>B,g0:()=>m,mG:()=>J,_x:()=>ee});var r=n(89496);class o{constructor(){this._onDidChangeTreeData=new r.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}}class s{constructor(e=console){this.writer=e}record(e,t){this.writer.log(function(e){return`[Telemetry ${e}]`}(e),t)}}class a{constructor(e,t){this.type=e,this.data=t}fetch(e){return this.require(e),this.data[e]}require(e){const t=`Telemetry: ${this.type} is missing ${e}`;if(!this.data.hasOwnProperty(e))throw new Error(t)}}class i{constructor(e,t){this.user=e,this.platform=t,this.visitor=n(40387)("UA-88380372-8",{uid:this.user.id}),this.setPersistentParams()}get enabled(){return"untracked"!==this.user.state}setPersistentParams(){this.visitor.set("uid",this.user.id),this.visitor.set("ds","app"),this.visitor.set("cd1",this.user.state),this.visitor.set("cd2",this.platform),this.visitor.set("cd3",2)}record(e,t){if(!this.enabled)return;const n=new a(e,t);switch(e){case"UserStateChanged":this.user.state=n.fetch("state"),this.setPersistentParams();break;case"ExtensionActivated":this.extensionActivated(n.fetch("time"));break;case"ExtensionDeactivated":this.extensionDeactivated();break;case"StartedTracking":this.startedTracking();break;case"StoppedTracking":this.stoppedTracking();break;case"ScreenViewed":this.screenViewed(n.fetch("screen"));break;case"CommandRun":this.commandRun(n.fetch("commandType"),n.fetch("time"));break;case"ExceptionOccurred":this.exception(n.fetch("error"));break;case"FeatureUsed":this.featureUsed(n.fetch("feature"));break;case"WorkspaceType":this.workspaceType(n.fetch("workspaceType"));break;default:throw new Error(`Unknown Telemetry type: ${e}`)}}extensionActivated(e){this.visitor.event({ec:"Application",ea:"Activated"}).timing({utc:"Application",utv:"Activation Time",utt:e}).send()}extensionDeactivated(){this.visitor.event({ec:"Application",ea:"Deactivated"}).send()}startedTracking(){this.visitor.event({ec:"Data Collection",ea:"Opt In"}).send()}stoppedTracking(){this.visitor.event({ec:"Data Collection",ea:"Opt Out"}).send()}screenViewed(e){this.visitor.screenview({an:"Nx Console",cd:e}).send()}commandRun(e,t){this.visitor.timing({utc:"Command",utv:e,utt:t}).send()}exception(e){this.visitor.exception({exd:e}).send()}featureUsed(e){this.visitor.event({ec:"Feature",ea:e}).send()}workspaceType(e){this.visitor.event({ec:"WorkspaceType",ea:e,ev:1}).send()}}class c{constructor(e,t="tracked"){this.id=e,this.state=t}static fromStorage(e){let t=e.get("uuid"),r="tracked";return t||(t=n(71171)(),e.set("uuid",t)),e.get("enableTelemetry",!0)||(r="untracked"),new c(t,r)}tracked(){this.state="tracked"}untracked(){this.state="untracked"}isTracked(){return"tracked"===this.state}isUntracked(){return"untracked"===this.state}}class p{constructor(e){this.user=e,this.sinks=[],this.state=this.user.state}static withGoogleAnalytics(e,t){const n=c.fromStorage(e),r=new p(n),o=new i(n,t);return r.addSink(o),r}static withLogger(e){const t=c.fromStorage(e),n=new p(t),r=new s;return n.addSink(r),n}addSink(e){this.sinks.push(e)}record(e,t={}){this.sinks.forEach((n=>n.record(e,t)))}extensionActivated(e){this.record("ExtensionActivated",{time:e})}extensionDeactivated(){this.record("ExtensionDeactivated")}startedTracking(){this.user.tracked(),this.userStateChanged(),this.record("StartedTracking")}stoppedTracking(){this.record("StoppedTracking"),this.user.untracked(),this.userStateChanged()}userStateChanged(){this.state!==this.user.state&&(this.state=this.user.state,this.record("UserStateChanged",{state:this.user.state}))}screenViewed(e){this.record("ScreenViewed",{screen:e})}commandRun(e,t){this.record("CommandRun",{commandType:e,time:t})}exception(e){this.record("ExceptionOccurred",{error:e})}featureUsed(e){this.record("FeatureUsed",{feature:e})}}let u,d=null;function l(){return u}function h(e,t){return u=t?p.withGoogleAnalytics(e,"vscode"):p.withLogger(e),e.get("shownTelemetryPrompt")||(r.window.showInformationMessage("Help improve Nx Console by allowing us to collect data. To opt-out set nxConsole.enableTelemetry to false in settings."),e.set("shownTelemetryPrompt",!0)),d=r.workspace.onDidChangeConfiguration((t=>{t.affectsConfiguration("nxConsole.enableTelemetry")&&(e.get("enableTelemetry")?u.startedTracking():u.stoppedTracking())})),u}function m(){d&&d.dispose()}let f;function g(){return f||(f=r.window.createOutputChannel("Nx Console")),f}var w=n(71017),y=n(45957),x=n(36191),k=n(76420),j=n(57147),v=n(73292),P=n(36065);const b={},T=["name","project","module","watch","style","directory","port"],C=new Set(T);function O(e){if(e.indexOf("node_modules")>-1)return[];if(e.indexOf("dist")>-1)return[];const t=[e];try{(0,j.readdirSync)(e).forEach((n=>{const r=w.join(e,n);try{(0,j.statSync)(r).isDirectory()?(0,j.statSync)(r).isDirectory()&&t.push(...O(r)):t.push(r)}catch{}}))}catch{}return t}function S(e){try{return(0,j.statSync)(e).isFile()}catch{return!1}}async function $(e){const t=await(0,v.readFile)(e,"utf-8");try{return JSON.parse(t)}catch{const n=[],r=(0,P.parse)(t,n);if(n.length>0)for(const{error:t,offset:r}of n)g().appendLine(`${(0,P.printParseErrorCode)(t)} in JSON at position ${r} in ${e}`);return r}}function N(e,t=""){const n=w.join(t,e);return delete b[n]}function E(e,t="",n){const r=w.join(t,e);return b[r]?{json:b[r],path:r}:(n&&(b[r]=n),{json:n,path:r})}async function W(e,t=""){if(!e)return{path:"",json:{}};const n=w.join(t,e);try{const e=await(0,v.stat)(n);if(b[n]||e.isFile())return b[n]||(b[n]=await $(n)),{path:n,json:b[n]}}catch(e){g().appendLine(`${n} does not exist`)}return{path:n,json:{}}}const D=new y.schema.CoreSchemaRegistry(x.standardFormats);async function U(e,t){const n=await(0,k.tY)(D,e),r=new Set(e.required||[]);return n.map((n=>{const o=e.properties[n.name]["x-prompt"],s=t&&t[n.name],a=e.properties[n.name].$default,i={...n,required:L(r,n,o,a),...void 0!==s&&{default:s},...a&&{$default:a},...n.enum&&{items:n.enum.map((e=>e.toString()))},...M(e.properties[n.name])};if(o&&(i.tooltip=A(o)?o.message:o,i.itemTooltips=function(e){const t={};return e&&A(e)&&(e.items||[]).forEach((e=>{_(e)&&e.label&&(t[e.value]=e.label)})),t}(o),A(o)&&!i.items)){const e=(o.items||[]).map((e=>_(e)?e.value:e));e.length>0&&(i.items=e)}return i})).sort(((e,t)=>"number"==typeof e.positional&&"number"==typeof t.positional?e.positional-t.positional:"number"==typeof e.positional?-1:"number"==typeof t.positional?1:e.required?t.required?e.name.localeCompare(t.name):-1:t.required?1:C.has(e.name)?C.has(t.name)?T.indexOf(e.name)-T.indexOf(t.name):-1:C.has(t.name)?1:e.name.localeCompare(t.name)))}function L(e,t,n,r){return e.has(t.name)||!!n&&!t.default&&!r&&"boolean"!==t.type}function M(e){return e.items&&{items:e.items?.enum||e.items.length&&e.items}}function A(e){return void 0!==e.message}function _(e){return void 0!==e.value||void 0!==e.label}function q(e,t,n){e[n]=e[t],delete e[t]}function J(e){Object.values(e.projects||{}).forEach((e=>{e.architect&&q(e,"architect","targets"),e.schematics&&q(e,"schematics","generators"),Object.values(e.targets||{}).forEach((e=>{e.builder&&q(e,"builder","executor")}))}));const t=Object.entries(e.projects||{}).sort(((e,t)=>e[0].localeCompare(t[0])));return e.projects=Object.fromEntries(t),e.schematics&&q(e,"schematics","generators"),e}function B(e,t,n){return{options:[],configurations:t.configurations?Object.keys(t.configurations).map((e=>({name:e,defaultValues:I(t.configurations,e)}))):[],name:e,project:n,description:t.description??"",builder:t.executor}}function I(e,t){const n=[],r=e[t];return r?Object.keys(r).reduce(((e,t)=>{return[...e,{name:t,defaultValue:(n=r[t],"string"==typeof n||"number"==typeof n||"boolean"==typeof n?n.toString():void 0)}];var n}),n):n}async function F(e,t,n){const[r,o]=t.split(":"),s=await W(w.join(r,"package.json"),w.join(e,"node_modules")),a=s.json.builders||s.json.executors,i=a.startsWith(".")?a:`./${a}`,c=await W(i,w.dirname(s.path)),p=(c.json.builders||c.json.executors)[o],u=await W(p.schema,w.dirname(c.path));return await U(u.json,n)}var R=n(47812),V=n(22037);async function G(e,t){const n=(0,w.dirname)(e),r=(0,w.join)(n,"node_modules");t&&N("package.json",n);const o=await async function(e){const t=[];if(!(await(0,v.stat)(e)).isDirectory())return t;const n=await(0,v.readdir)(e);for(const r of n)r.startsWith(".")||(await(0,v.stat)(w.join(e,r))).isDirectory()&&(r.startsWith("@")?(await(0,v.readdir)(w.join(e,r))).forEach((e=>{t.push(`${r}/${e}`)})):t.push(r));return t}(r),s=await Promise.all(o.map((async e=>({packageName:e,packageJson:(await W((0,w.join)(e,"package.json"),r)).json})))),a=(await Promise.all(s.map((e=>H(r,e.packageName))))).flat(),i=new Map;for(const e of a)e&&(i.has(e.name)||i.set(e.name,e));return Array.from(i.values())}async function H(e,t){try{const n=await W((0,w.join)(t,"package.json"),e),[r,o]=await Promise.all([W(n.json.executors||n.json.builders,(0,w.dirname)(n.path)),W(n.json.generators||n.json.schematics,(0,w.dirname)(n.path))]);return Q(t,n.path,e,r,o)}catch(e){return null}}async function Q(e,t,n,r,o){const s=(0,w.dirname)(t),a=new Map,i=(t,n,r,o)=>{let a=(0,w.resolve)(s,(0,w.dirname)(o),n.schema);return"win32"===(0,V.platform)()&&(a=`file:///${a.replace(/\\/g,"/")}`),{name:`${e}:${t}`,type:r,path:a}},c={...r.json.executors,...r.json.builders};for(const[e,t]of Object.entries(c)){if(!Y(e,t))continue;const n=i(e,t,"executor",r.path);a.has(n.name)||a.set(n.name,n)}const p={...o.json.generators,...o.json.schematics};for(const[t,n]of Object.entries(p))if(Y(t,n))try{const r=i(t,n,"generator",o.path);if(r.data=z(e,t,n),a.has(r.name))continue;a.set(r.name,r)}catch(e){}if(o.json.extends&&Array.isArray(o.json.extends)){const e=o.json.extends,t=(await Promise.all(e.filter((e=>"@nrwl/workspace"!==e)).map((e=>H(n,e))))).flat().filter((e=>Boolean(e)));for(const e of t)a.has(e.name)||a.set(e.name,e)}return Array.from(a.values())}function z(e,t,n){try{let r;switch(n["x-type"]){case"application":r=R.T.Application;break;case"library":r=R.T.Library;break;default:r=R.T.Other}return{name:t,collection:e,description:n.description||"",type:r}}catch(n){console.error(n),console.error(`Invalid package.json for schematic ${e}:${t}`)}}function Y(e,t){return!t.hidden&&!t.private&&!t.extends&&"ng-add"!==e}async function K(e){const t=(0,w.join)(e,"..");let n=(await G(e,!1)).filter((e=>"generator"===e.type));return n=[...n,...await X(t,(0,w.join)("tools","schematics")),...await X(t,(0,w.join)("tools","generators"))],n.filter((e=>!!e.data))}async function X(e,t){return await async function(e){try{return(await(0,v.stat)(e)).isDirectory()}catch{return!1}}((0,w.join)(e,t))?await async function(e,t){const n=(0,w.join)(e,t),r="workspace-generator",o=(0,w.join)(n,"collection.json");if(S(o)){const e=await W("collection.json",n);return Q(r,o,n,{path:o,json:{}},e.json)}return await Promise.all(O(n).filter((e=>"schema.json"===(0,w.basename)(e))).map((async e=>{const t=await W(e,""),o=t.json.id||t.json.$id,s=t.json["x-type"]??R.T.Other;return{name:r,type:"generator",path:n,data:{name:o,collection:r,options:await U(t.json),description:"",type:s}}})))}(e,t):Promise.resolve([])}async function Z(e,t){return(await G(e,t)).filter((e=>"executor"===e.type))}function ee(e,t){const n=r.workspace.createFileSystemWatcher(e);return n.onDidChange(t),n}},69381:(e,t,n)=>{"use strict";n.d(t,{BG:()=>i,Tl:()=>c});var r=n(89496);const o=["enableTelemetry","useNVM","enableGenerateFromContextMenu","enableWorkspaceConfigCodeLens"];let s,a;class i{constructor(e){this.state=e}static fromContext(e){return s=new i(e.globalState),s}static get instance(){if(!s)throw Error("Please create a configuration store with `fromContext` first");return s}get(e,t){const n=this.storage(e).get(e,t);return void 0===n?t||null:n}set(e,t){this.storage(e).update(e,t)}delete(e){this.storage(e).update(e,void 0)}storage(e){return function(e){return o.includes(e)}(e)?this.config:this.state}get config(){return r.workspace.getConfiguration(i.configurationSection)}}i.configurationSection="nxConsole";class c{constructor(e){this.state=e}static fromContext(e){return a=new c(e.workspaceState),a}static get instance(){if(!a)throw Error("Please create a configuration store with `fromContext` first");return a}delete(e){this.state.update(e,void 0)}get(e,t){const n=this.state.get(e,t);return void 0===n?t:n}set(e,t){this.state.update(e,t)}}},64903:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ProjectCodeLens:()=>x,WorkspaceCodeLensProvider:()=>k,getNxConfig:()=>v,getNxWorkspaceConfig:()=>w,getProjectLocations:()=>o,revealNxProject:()=>h,verifyWorkspace:()=>y});var r=n(55423);function o(e,t=""){const n={},o=(0,r.parseJsonText)("workspace.json",e.getText()),c=o.statements[0],p=s(c.expression)?.find((e=>"projects"===a(e)));return p?s(p.initializer)?.forEach((e=>{const t=a(e);t&&(n[t]={position:e.getStart(o),targets:i(e,["architect","targets"],o)??{}})})):n[t]={position:0,targets:i(c.expression,["architect","targets"],o)??{}},n}function s(e){return(0,r.isObjectLiteralExpression)(e)?e.properties:(0,r.isPropertyAssignment)(e)?s(e.initializer):void 0}function a(e){if((0,r.isPropertyAssignment)(e)&&(0,r.isStringLiteral)(e.name))return e.name.text}function i(e,t,n){const r=s(e)?.find((e=>{const n=a(e);return t.some((e=>n===e))}));if(r)return s(r)?.reduce(((e,t)=>{const r=a(t);if(!r)return e;e[r]={position:t.getStart(n)};const o=i(t,["configurations"],n);return o&&(e[r].configurations=o),e}),{})}var c=n(71017),p=n(89496),u=n(14255),d=n(69381);async function l(){const e=d.Tl.instance.get("nxWorkspaceJsonPath","");return{rawWorkspace:await(0,u.vL)(e),workspaceJsonPath:e}}async function h(e,t){const n=await l(),r=n.rawWorkspace;let s=n.workspaceJsonPath;if("string"==typeof r.projects[e]){const t=(0,c.dirname)(s);s=(0,c.join)(t,r.projects[e],"project.json")}const a=await p.workspace.openTextDocument(p.Uri.file(s)),i=o(a,e);let u=i[e].position;if(t){const n=i[e].targets[t.name],r=n.configurations?.[t.configuration||""];u=r?r.position:n.position}const d=a.positionAt(u);await p.window.showTextDocument(a,{selection:new p.Selection(d,d)})}var m=n(88751),f=n(22037);async function g(){const e=(0,c.dirname)(d.Tl.instance.get("nxWorkspaceJsonPath",""));let t=(0,c.join)(e,"node_modules","@nrwl","workspace","src","core","file-utils.js");return new Promise((e=>{try{return"win32"===(0,f.platform)()&&(t=t.replace(/\\/g,"/")),e(require(t))}catch(t){return(0,u.g)().appendLine(`\n    Error loading @nrwl/workspace from workspace. Falling back to extension dependency\n    Error: ${t}\n          `),e(m)}}))}async function w(e,t){try{let n=(0,u.fh)(t).json;if(!n||function(e){const t=e?.projects??{};return Object.entries(t).some((([,e])=>"string"==typeof e))}(n)){const r=(await g()).readWorkspaceConfig({format:"nx",path:e});n=(0,u.fh)(t,"",r).json}return n}catch(e){return(await(0,u.eP)(t)).json}}async function y(){const e=(0,c.dirname)(d.Tl.instance.get("nxWorkspaceJsonPath","")),t=(0,c.join)(e,"workspace.json"),n=(0,c.join)(e,"angular.json");try{if((0,u.Ck)(t))return{validWorkspaceJson:!0,json:(0,u.mG)(await w(e,t)),workspaceType:"nx",configurationFilePath:t};if((0,u.Ck)(n))return{validWorkspaceJson:!0,json:(0,u.mG)(await w(e,n)),workspaceType:"ng",configurationFilePath:n};throw new Error(`Could not find configuration file in selected directory: ${e}`)}catch(t){const n="Invalid workspace: "+e;p.window.showErrorMessage(n,"Show Error").then((e=>{e&&(0,u.g)().show()})),(0,u.g)().appendLine(n);const r=t.toString?t.toString():JSON.stringify(t);return(0,u.g)().appendLine(r),(0,u.c2)().exception(r),{validWorkspaceJson:!1,workspaceType:"nx",json:{projects:{},version:2},configurationFilePath:""}}}class x extends p.CodeLens{constructor(e,t,n,r,o){super(e),this.workspaceType=t,this.project=n,this.target=r,this.configuration=o}}class k{constructor(e){this.context=e,this.registerWorkspaceCodeLensProvider(e),this.watchWorkspaceCodeLensConfigChange(e)}async provideCodeLenses(e){const t=[];let n="";if(e.uri.path.endsWith("project.json")){const{rawWorkspace:t}=await l();for(const[r,o]of Object.entries(t.projects))if("string"==typeof o&&e.uri.path.replace(/\\/g,"/").endsWith(`${o}/project.json`)){n=r;break}}const r=o(e,n),{validWorkspaceJson:s,workspaceType:a}=await y();if(s){for(const n in r){const o=r[n].targets;for(const r in o){const s=e.positionAt(o[r].position);t.push(new x(new p.Range(s,s),a,n,r));const i=o[r].configurations;if(i)for(const o in i){const s=e.positionAt(i[o].position);t.push(new x(new p.Range(s,s),a,n,r,o))}}}return t}}resolveCodeLens(e){if(e instanceof x){const t={command:`${e.workspaceType}.run`,title:e.configuration?`${e.workspaceType} run ${e.project}:${e.target}:${e.configuration}`:`${e.workspaceType} run ${e.project}:${e.target}`,arguments:[e.project,e.target,e.configuration]};return e.command=t,e}return null}registerWorkspaceCodeLensProvider(e){d.BG.instance.get("enableWorkspaceConfigCodeLens")&&(this.codeLensProvider=p.languages.registerCodeLensProvider({pattern:"**/{workspace,angular,project}.json"},this),e.subscriptions.push(this.codeLensProvider))}watchWorkspaceCodeLensConfigChange(e){e.subscriptions.push(p.workspace.onDidChangeConfiguration((e=>{if(e.affectsConfiguration(d.BG.configurationSection)){const e=d.BG.instance.get("enableWorkspaceConfigCodeLens");e&&!this.codeLensProvider?this.registerWorkspaceCodeLensProvider(this.context):!e&&this.codeLensProvider&&(this.codeLensProvider.dispose(),this.codeLensProvider=null)}})))}}var j=n(73292);async function v(e){try{await(0,j.stat)((0,c.join)(e,"nx.json"))}catch(e){return{npmScope:"@ng"}}try{let t=(0,u.fh)("nx.json",e).json;if(!t){const n=(await g()).readNxJson((0,c.join)(e,"nx.json"));t=(0,u.fh)("nx.json",e,n).json}return t}catch(t){return(await(0,u.eP)("nx.json",e)).json}}},13411:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=13411,e.exports=t},35670:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=35670,e.exports=t},65779:e=>{"use strict";e.exports=require("tslint")},89496:e=>{"use strict";e.exports=require("vscode")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},22057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},31405:e=>{"use strict";e.exports=require("inspector")},98188:e=>{"use strict";e.exports=require("module")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},85477:e=>{"use strict";e.exports=require("punycode")},63477:e=>{"use strict";e.exports=require("querystring")},14521:e=>{"use strict";e.exports=require("readline")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},84655:e=>{"use strict";e.exports=require("v8")},59796:e=>{"use strict";e.exports=require("zlib")}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=r,s.c=o,s.x=()=>{var e=s.O(void 0,[668],(()=>s(73935)));return s.O(e)},e=[],s.O=(t,n,r,o)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],i=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(s.O).every((e=>s.O[e](n[c])))?n.splice(c--,1):(i=!1,o<a&&(a=o));if(i){e.splice(u--,1);var p=r();void 0!==p&&(t=p)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>e+".js",s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n={179:1},s.O.require=e=>n[e],s.f.require=(e,t)=>{n[e]||(e=>{var t=e.modules,r=e.ids,o=e.runtime;for(var a in t)s.o(t,a)&&(s.m[a]=t[a]);o&&o(s);for(var i=0;i<r.length;i++)n[r[i]]=1;s.O()})(require("./"+s.u(e)))},t=s.x,s.x=()=>(s.e(668),t());var a=s.x(),i=exports;for(var c in a)i[c]=a[c];a.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();